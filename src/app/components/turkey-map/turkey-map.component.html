<div id="svg-turkiye-haritasi-container" class="d-flex flex-row justify-content-center"
     (mousemove)="updatePopupPosition($event)">
  <svg version="1.1" id="svg-turkiye-haritasi" xmlns="http://www.w3.org/2000/svg"
       xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 80 1050 585" xml:space="preserve"
       style="width: 1300px; height: auto;">
    <g id="turkiye">
      <g (click)="openLgModal(lgModal,city);selectedCity=city" *ngFor="let city of cities" [id]="city.id"
         data-is-election-city="false">
        <path
          [attr.fill]="getColor(city.plateNumber)"
          stroke="#ffffff"
          stroke-width="1"
          stroke-miterlimit="10"
          stroke-linecap="butt"
          stroke-linejoin="miter"
          stroke-opacity="1"
          fill-opacity="1"
          class="svg-turkiye-haritasi-il"
          [attr.d]="city.path"
          (mouseenter)="showPopup(city, $event)"
          (mouseleave)="hidePopup()"
        ></path>
      </g>
    </g>
  </svg>
</div>

<!-- Button trigger lg modal -->
<!-- Modal -->
<ng-template #lgModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel">{{selectedCity.name}}</h5>
    <button type="button" class="btn-close" (click)="modal.close('by: close icon')" aria-label="Close"></button>
  </div>
  <div class="modal-body" [ngClass]="[loading?'text-center':'']">
    <div *ngIf="!loading" class="row">
      <div (click)="detail(user)" *ngFor="let user of corporateUsers;index as i" style="cursor: pointer"
           class="col-12 col-md-6 col-xl-4 text-white">
        <div class="card text-white" [ngStyle]="{'background-color':hexToRgba(user.color,0.87)}">
          <div class="card-body">
            <h5 class="card-title">{{user.name}}</h5>
            <label class="fw-bolder mb-0 text-uppercase">Şikayet Sayısı:  {{user.complaintCount}}</label>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="loading" class="spinner-border text-primary text-center" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
</ng-template>
